# Server Smoke Test via Desktop Client

| ID | Test Case                                   | Steps to reproduce                                                                                                                                                                                                              | Expected Result                                                                                                                                | Result | Related Comment |
|----|---------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------|--------|-----------------|
| 1  | Connect via OpenID-Connect | Connect with openID-Connect | Redirect roundtrip to IDP, user can log in | | |
| 2  | Verify server-to-client file sync | Sync a file from a server to a client | File has been synced to the client | | |
| 3  | Verify client-to-server file sync | Sync a file from a client to a server | The file has been synced to the server | | |
| 4  | Verify public link share creation | Share a file via public link (enforce password/expiry). ocis: Share a file opens WebUI. | ocis: WebUI opens. | | |
| 5  | Verify sync of shared file content edit | Make changes to the content of the shared file | Changes synced to server. Collaborator receives changes. | | |
| 6  | Verify collaborator does NOT receive rename of shared file | Rename a shared file | Changes synced to server. Collaborator has **NOT** received the changes. | | |
| 7 | Verify collaborator does NOT receive move of shared file | Move a shared file | Changes synced to server. Collaborator has **NOT** received the changes. | | |
| 8 | Verify collaborator's file is deleted when share is deleted | Delete a shared file | File deleted on server. File also deleted from collaborator. | | |
| 9 | Verify 'Server Activity' tab logs sharing actions | 1. Go to Activity tab.<br/> 2. Check the server activity.<br/> 3. If needed trigger some notifications:<br/> <br/> **Server admin**<br/> Sharing -> enable the checkbox:<br/> [x] Automatically accept new incoming local user shares<br/> <br/> **User alice**<br/> - Opens the web UI, settings, sharing.<br/> - Enable mail and stream notification for 'A file or folder has been shared'.<br/> <br/> User alice connects a desktop client and opens the 'Server Activity' tab.<br/> User bob shares his Photos folder with alice.<br/> Wait 1 minute.<br/> User alice sees a line 'bob shared Photos with you' in the activity tab of the client.<br/> User bob removes the share for his Photos.<br/> User alice sees 'bob removed the share for Photos'. | Server activities have been logged (tab is not empty). | | |
| 10 | Verify actionable share notification in client | Send notification with action by sharing a folder.<br/> <br/> **Server admin**<br/> Sharing -> disable the checkbox:<br/> [ ] Automatically accept new incoming local user shares<br/> <br/> **User bob** shares his Photos folder with alice.<br/> <br/> Wait 1 minute.<br/> User alice sees a bell icon when she refreshes the web ui:<br/> "bob" shared "Photos" with you<br/> [Accept] [Decline]<br/> <br/> User alice sees a Notification on the client activity tab:<br/> "bob" shared "Photos" with you<br/> [Dismiss] [Accept] [Decline]<br/> Click accept.<br/> The message refreshes and disappear a few seconds later.<br/> The bell icon in the web UI also disappears.<br/> wait 1 minute<br/> Client starts syncing the new contents. | User alice sees a Notification on the client activity tab: `"bob" shared "Photos" with you [Dismiss] [Accept] [Decline]` | | |
