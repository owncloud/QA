# Virtual Files Support

## 1. VFS with selective sync

| ID | Test Case                                   | Steps to reproduce                                                                                                                                                                                                              | Expected Result                                                                                                                                | Result | Related Comment |
|----|---------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------|--------|-----------------|
| 1  | Verify selective sync is reset when disabling virtual files | 1.  connect to the server <br/> 2.  start with manual folder sync connection<br/> 3.  deselect the Photos folder<br/> 4.  wait until the sync finishes<br/> 5.  Then click on the 3 dots of the sync folder to enable virtual files<br/> 6.  The Photos folder gets created, all files in it are virtual files.<br/> 7.  Click on the 3 dots in the sync folder to disable the virtual files feature again | Photos folder is selected and all contained files have been downloaded (selective sync settings are reset when vfs is enabled) <br/> GitHub issues: [#6876](https://github.com/owncloud/client/issues/6876) [#7302](https://github.com/owncloud/client/issues/7302) | | |
| 2 | Verify enabling VFS overrides selective sync and makes all folders virtual | 1.  In the selective sync list: <br/>- Diselect some previously selected folders <br/>- Select some previously unselected folders in the selective sync list <br/> 2.  Apply changes<br/> 3.  Without waiting for sync to complete, enable the VFS | All the folders are virtual <br/> Github issue: [#6936](https://github.com/owncloud/client/issues/6936) | | | 
| 3 | Verify no false data-loss warning when disabling VFS during selective sync changes | 1.  Make sure you have one single folder with one large file (1G) <br/>2.  Turn on VFS (wait until it's synced) <br/>3.  Hydrate some files from some folders <br/>4.  Turn off VFS <br/>5.  Immediately (when the sync is in progress) deselect all folders in the selective sync and Apply changes | No 'All files were deleted on the server' message <br/> GitHub issue: [#6936](https://github.com/owncloud/client/issues/6936#issuecomment-514179608) | | | 

## 2. VFS and Selective sync are mutually exclusive

| ID | Test Case                                   | Steps to reproduce                                                                                                                                                                                                              | Expected Result                                                                                                                                | Result | Related Comment |
|----|---------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------|--------|-----------------|
| 1  | VFS and Selective sync are mutually exclusive | 1. Add an account with manual sync option <br/> 2. Open ""Add Folder Sync Connection"" dialog via ""Add Folder"" button <br/> 3. In ""Deselect remote folders..."" window, check and uncheck ""Use virtual files..."" option | Check: <br/> 1. When VFS is ON, user cannot select folders for selective sync <br/> 2. When VFS is OFF, user can select folder  for selective sync | | | 
| 2 | Verify enabling VFS syncs all folders as virtual files after selective sync | 1. Open ""Add Folder Sync Connection"" dialog via ""Add Folder"" button <br/> 2. In ""Deselect remote folders..."" window: <br/> - Uncheck VFS option <br/> - Unselect some folders (to prevent from being synced) <br/> - Add folder sync connection <br/> 3. Enable VFS from the sync connection menu (... menu) | Only selected folders are synced. <br/> After VFS ON: <br/> - All folders including unselected ones have been synced down <br/> - Newly synced folders/files are replaced by virtual files <br/> GitHub issues: [#6876](https://github.com/owncloud/client/issues/6876) [#7302](https://github.com/owncloud/client/issues/7302) | | | 
| 3 | Verify disabling VFS hydrates all files to physical copies | Turn off VFS | All files have been replaced by physical files | | | 
| 4 | Verify rapid switching between VFS and selective sync works without errors | [Switch between VFS and selective sync quickly] <br/> Enable/Diable VFS from the sync connection menu (... menu) <br/> 1. Enable virtual files support <br/> 2. Disable virtual files support <br/> 3. Enable virtual files support <br/> 4. Disable virtual files support | It works, no errors | | | 
