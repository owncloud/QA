###  Federated Sharing 

#### Pr: https://github.com/owncloud/ios/pull/XXX 

Devices: iPhone6 v9.2 (Server v8.2.2), iPad Air v8.4 (Server v9)

Server: 8.2.2 & 9


---


|         TestID          | Test Case                     | Steps                                    | Expected Result                          |   Result   | Related Comment                          |
| :---------------------: | :---------------------------- | :--------------------------------------- | :--------------------------------------- | :--------: | :--------------------------------------- |
|    **Correct view**     |                               |                                          |                                          |            |                                          |
|            1            | "Can share" not displayed     | 1. Swipe to share a file or folder with federated users<br>2. Tap on (i) to manage privileges | "Can share" option is not displayed. Only "Can edit" |  P m9 t8   | t8: https: sharing a "x" failed, could not find "xx@dockerâ€¦" maybe the server is currently unreachable |
|            2            | "remote" is shown             | 1. Swipe to share a file or folder with users<br>2. Type a username and then an '@' | Within the results, there is one like 'username'@(remote) |  P m9 t9   |                                          |
|  **Federated Sharing**  |                               |                                          |                                          |            |                                          |
|            3            | Shared file (http)            | 1. Swipe to share a file with users<br>2. Type a username and then an '@' and a correct http server URL<br>3. Login in web with the sharee and accept the federated share<br>4. Login in app with the sharee | The shared file appears in files view    |  P m9 t8   |                                          |
|            4            | Shared folder (http)          | 1. Swipe to share a folder with users<br>2. Type a username and then an '@' and a correct http server URL<br>3. Login in web with the sharee and accept the federated share<br>4. Login in app with the sharee | The shared folder appears in files view and can be browsed |  P m9 t8   |                                          |
|            5            | Shared file (https trusted)   | 1. Swipe to share a file with users<br>2. Type a username and then an '@' and a correct https server URL<br>3. Login in web with the sharee and accept the federated share<br>4. Login in app with the sharee | The shared file appears in files view    |  P m9 t8   |                                          |
|            6            | Shared folder (https trusted) | 1. Swipe to share a folder with users<br>2. Type a username and then an '@' and a correct https server URL<br>3. Login in web with the sharee and accept the federated share<br>4. Login in app with the sharee | The shared folder appears in files view and can be browsed |  P m9 t8   |                                          |
|            7            | Shared with groups            | 1. Swipe to share a file/folder with a group<br>2. Type a groupname and then an '@' and a correct server URL | Federated share with groups is not allowed |  P m9 t8   | Enhancement: Change message: "maybe the server is currently unreachable" |
|            8            | Reject federated              | 1. Swipe to share a file with users<br>2. Type a username and then an '@' and a correct server URL<br>3. Login in web with the sharee and reject the federated share<br>4. Login in app with the sharee | The shared file does not appear in files view. The share does not show the file as shared |  P m9 t8   |                                          |
|            9            | Special characters            | 1. Repeat the test cases 2. or 3. with file/folder which contains special characters | The shared file/folder appears in files view |  P m9 t8   |                                          |
|           10            | User with '@'                 | 1. Repeat the test cases 2. or 3. using a username which contains '@', for example 'M@ri@' | The search view is correct, showing the option M@ri@@(remote). The file/folder can be federated shared |  P m9 t8   |                                          |
|           11            | User called '@'               | 1. Repeat the test cases 2. or 3. using a username '@' | The search view is correct, showing the option @@(remote). The file/folder can be federated shared |  P m9 t8   |                                          |
|           12            | Multiple federated            | 1. Swipe to share a folder with users<br>2. Type different federated URLs (different servers and users)<br>3. Login in web with the sharees and accept the federated share<br>4. Login in app with the sharees | All sharees can view the file/folder     |  P m9 t8   |                                          |
|           13            | Unsharing                     | 1. Share (federated) a file/folder<br> 2. Accept it in the web<br>3.  In the sharing user, unshare the file | 2. The sharee can view the file<br>3. The sharee can not view the file |  P m9 t8   |                                          |
|       **Errors**        |                               |                                          |                                          |            |                                          |
|           14            | Inexistent User               | 1. Repeat the test cases 2. or 3. using a username which does not exist in remote server | The file can not be shared, an error appears |  P m9 t8   |                                          |
|           15            | Inexistent Server             | 1. Repeat the test cases 2. or 3. using an inexistent remote URL | The file can not be shared, an error appears |  P m9 t8   | Error message can be incorrect           |
|           16            | Share twice fed               | 1. Share federated twice with the same user | First time the file is shared, second time, an error is received |  P m9 t8   |                                          |
|           17            | Deleted account               | 1. Repeat the test cases 2. or 3.<br> 2. From admin in web, delete the account ot the sharing user | The sharee can not view the shared file or folder |  F m9 t8   | https://github.com/owncloud/core/issues/22525 |
|           18            | Without connection            | 1. Switch the wifi connection off<br>2. Try to share with a federated user | An error appears                         |  P m9 t8   |                                          |
|           19            | Without server connection     | 1. Switch the server off<br>2. Try to share with a federated user | An error appears                         |  P m9 t8   |                                          |
|           20            | Server under maintenance mode | 1. Repeat the test cases 2. or 3. using a server under maitenance mode | The file can not be shared, an error appears |  P m9 t8   |                                          |
| **Server Capabilities** |                               |                                          |                                          |            |                                          |
|           21            | Federated Sharing disabled    | 1. In server side, disable the capability to share with federation<br>2. In app, try to share with federation<br> | The share is not accepted and an error is raised |    P m9    |                                          |
|           22            | Receive Federated disabled    | 1. In server side, disable the capability to receive federated shares<br>2. In app, try to share form a other server's user with the current server<br> | The share is not accepted and an error is raised |    P m9    |                                          |
|   **Edit Privilege**    |                               |                                          |                                          |            |                                          |
|           23            | Edit granted file             | 1. Swipe to share a file with users<br>2. Type a federated URL<br>3. Grant the federated user to edit<br> 4. Login in web with the sharee and accept the federated share<br>5. Login in app with the sharee and try to edit the file | The shared file appears in files view and can be edited |    P m9    |                                          |
|           24            | Edit granted folder           | 1. Swipe to share a folder with users<br>2. Type a federated URL<br>3. Grant the federated user to edit<br> 4. Login in web with the sharee and accept the federated share<br>5. Login in app with the sharee and try to edit the folder | The shared folder appears in files view and can be edited (upload/update/delete) |    P m9    |                                          |
|           25            | Edit not granted file         | 1. Swipe to share a file with users<br>2. Type a federated URL<br>3. Do not grant the federated user to edit<br> 4. Login in web with the sharee and accept the federated share<br>5. Login in app with the sharee and try to edit the file | The shared file appears in files view and can not be edited |    P m9    |                                          |
|           26            | Edit not granted folder       | 1. Swipe to share a folder with users<br>2. Type a federated URL<br>3. Do not grant the federated user to edit<br> 4. Login in web with the sharee and accept the federated share<br>5. Login in app with the sharee and try to edit the folder | The shared file appears in files view and can not be edited (upload/update/delete) |    P m9    |                                          |
|  **Reshare Privilege**  |                               |                                          |                                          |            |                                          |
|           27            | Share with edit               | 1. Swipe to share a file with an federated user granting him to edit <br>2. Login with the sharee<br>3. Try to reshare with other users in the same server granting them to edit and share<br>4. Login with the 2nd sharee | 3. The edit and share privileges are enabled and the file can be reshared<br>4. The 2nd sharee can edit and share the file | P m9, P m8 |                                          |
|           28            | Share without edit            | 1. Swipe to share a file with an federated user without granting him to edit <br>2. Login with the sharee<br>3. Try to reshare with other users in the same server granting them to edit<br>4. Try to reshare with other users in the same server without granting them to edit | 3. The file can not be reshared because the permission exceeds<br>4. The file can be reshared and the 2nd sharee can not edit the file |    F m9 t8   | https://github.com/owncloud/core/issues/22587<br> Related: https://github.com/owncloud/core/issues/22553 |
|           29            | Reshare federated             | 1. Swipe to share a file with an federated user<br>2. Login with the sharee<br>3. Try to reshare with another federated in a different server | The file is reshared correctly           |    P m9    |                                          |
|           30            | Reshare initial user          | 1. Swipe to share a file with an federated user<br>2. Login with the sharee<br>3. Try to reshare with the initial share | The file can not be reshared with the initial share |    P m9    | The file is reshared with the initial user |
|           31            | Reshare initial server        | 1. Swipe to share a file with an federated user <br>2. Login with the sharee<br>3. Try to reshare with an user of the initial server | The user can see the file                |    P m9    |                                          |
|   **Special Servers**   | Only one device               |                                          |                                          |            |                                          |
|           32            | Shibboleth sharee             | 1. Swipe to share a file with an federated user in a shibboleth server <br>2. Login with the sharee<br> | The sharee in shibboleth server can view the file |     NA     | https://github.com/owncloud/documentation-enterprise/issues/221 |
|           33            | Shibboleth share              | 1. In a shibboleth server, swipe to share a file with an federated user <br>2. Login with the sharee<br> | The sharee can view the file             |     NA     | https://github.com/owncloud/documentation-enterprise/issues/221 |
|           34            | LDAP                          | 1. Swipe to share a file with an federated user in a LDAP server <br>2. Login with the sharee<br> | The sharee can view the file             |    P m9    |                                          |
|           35            | Redirect sharee               | 1. Swipe to share a file with an federated user in a redirect server <br>2. Login with the sharee<br> | The sharee can view the file             |    F m9    | Not working if the destiny is storage301/302 |
|           36            | No self signed                | 1. Swipe to share a file with an federated user in a no self signed server <br>2. Login with the sharee<br> | The sharee can view the file             |    P T8    |                                          |
|           37            | Self signed not trusted       | 1. Swipe to share a file with an federated user in a self signed server with an untrusted certificate <br>2. Login with the sharee<br> | The file can not be shared federated and the sharee can neither accept nor view it |    P T8    |                                          |